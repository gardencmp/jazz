import {
    Slogan,
    Grid,
    GridItem,
    GridFeature,
    GridCard,
    MultiplayerIcon,
    ResponsiveIframe,
    ComingSoonBadge
} from "@/components/forMdx";
import {
    JazzLogo
} from "@/components/logos";
import {
    WorkflowIcon,
    UploadCloudIcon,
    PlaneIcon,
    MonitorSmartphoneIcon,
    GaugeIcon,
    UsersIcon,
    FileLock2Icon,
    HardDriveDownloadIcon
} from "lucide-react";
import {
    App_tsx,
    ChatScreen_tsx,
} from "@/codeSamples/examples/chat/src";
import Link from "next/link";

<div className="md:pt-20"/>

# Instant sync.

<Slogan>A new way to build apps with distributed state.</Slogan>

<Grid className="gap-[1px] -mx-4 md:-mx-6 rounded-xl overflow-hidden bg-stone-50 dark:bg-stone-950 [&>*]:rounded-none [&>*]:border-none [&>*]:bg-stone-100 [&>*]:dark:bg-stone-900">
<GridFeature icon={<MonitorSmartphoneIcon strokeWidth={1} strokeLinecap="butt" size={40}/>}>Cross-device sync</GridFeature>
<GridFeature icon={<MultiplayerIcon strokeWidth={1} strokeLinecap="butt" size={40}/>}>Real-time multiplayer</GridFeature>
<GridFeature icon={<UsersIcon strokeWidth={1} strokeLinecap="butt" size={40}/>}>Team/social features</GridFeature>
<GridFeature icon={<FileLock2Icon strokeWidth={1} strokeLinecap="butt" size={40}/>}>Precise permissions</GridFeature>
{/* <GridFeature icon={<WorkflowIcon strokeWidth={1} strokeLinecap="butt" size={40}/>}>On-demand granular dataâ€‘fetching</GridFeature> */}
<GridFeature icon={<UploadCloudIcon strokeWidth={1} strokeLinecap="butt" size={40}/>}>Cloud sync & storage</GridFeature>
<GridFeature icon={<HardDriveDownloadIcon strokeWidth={1} strokeLinecap="butt" size={40}/>}>On-device storage</GridFeature>
<GridFeature icon={<PlaneIcon strokeWidth={1} strokeLinecap="butt" size={40}/>}>Full offline support</GridFeature>
<GridFeature icon={<GaugeIcon strokeWidth={1} strokeLinecap="butt" size={40}/>}>Instant UI updates</GridFeature>
<div className="col-start-1 row-start-1 row-span-2 col-span-2 px-4 md:px-6 text-base">
<h2 className="not-prose text-2xl font-medium tracking-tight mt-3 md:mt-5 mb-6">Hard things are easy now.</h2>

Jazz is an **open-source toolkit** that replaces APIs, databases and message queues with **a&nbsp;single new abstraction:**

**&ldquo;Collaborative Values&rdquo;** &mdash; **distributed state** with **secure permissions built-in.**

Features that used to take months to build now work out-of-the-box.
</div>
</Grid>

<div className="-mx-[calc(min(0,(100vw-95rem)/2))]">
### First impressions&hellip;
<Slogan small>A chat app in 98 lines of code.</Slogan>

<Grid className="mt-0 -mx-4 md:-mx-6">
<GridItem className="md:col-start-1 col-span-2">

<App_tsx/>

</GridItem>
<GridItem className="md:col-start-3 col-span-2">

<ChatScreen_tsx/>

</GridItem>
<ResponsiveIframe src="https://chat.jazz.tools" className="lg:col-start-5 col-span-2 rounded-xl overflow-hidden min-h-[50vh]"/>
</Grid>
</div>

### Wait, where's the backend?

TODO...

## Collaborative Values

<Slogan small>Your new building blocks.</Slogan>

<div className='text-base'>
Based on CRDTs and public-key cryptography, CoValues...

- Can be read & edited like simple local JSON state
- Can be created anywhere, are automatically synced & persisted
- Always keep full edit history & author metadata
- Automatically resolve most conflicts
</div>

### Bread-and-butter datastructures

<Grid className="lg:gap-y-8 lg:grid-cols-2">

<GridCard>
#### `CoMap`
<div className="text-sm">
- Collaborative key-value map
- Possible values:
    - Immutable JSON & other CoValues
</div>
</GridCard>

<GridCard>
#### `CoList`
<div className="text-sm">
- Collaborative ordered list
- Possible items:
    - Immutable JSON & other CoValues
</div>
</GridCard>

<GridCard>
#### `CoPlainText` & `CoRichText` <ComingSoonBadge/>
<div className="text-sm">
- Collaborative plain-text & rich-text
    - Gracefully prevents most editing conflicts
    - Rendered as markdown, HTML, JSX, etc.
</div>
</GridCard>

<GridCard>
#### `CoStream`
<div className="text-sm">
- Collection of independent per-user items streams:
    - Immutable JSON & other CoValues
- Great for presence, reactions, polls, replies etc.
</div>
</GridCard>
</Grid>

### First-class files & binary data

<Grid className="lg:gap-y-8 lg:grid-cols-2">

<GridCard>
#### `BinaryCoStream`
<div className="text-sm">
- Represents a file or live binary stream
- Can be referenced and synced like any other CoValue
- Can easily be converted from/to browser `Blob`s
    - <code>{`<input type="file"/>`}</code> -> `BinaryCoStream` -> `Blob` -> `BlobURL`
</div>
</GridCard>

<GridCard>
#### `ImageDefinition`
<div className="text-sm">
- Represents multiple resolutions of the same image
- Can be progressively loaded, including super fast blur preview & image size info
</div>
</GridCard>

</Grid>


### Secure permissions, authorship & teams

<Grid className="lg:gap-y-8 lg:grid-cols-2">
<GridCard>
#### `Group`
<div className="text-sm">
- A scope where specified accounts have roles (`reader`/`writer`/`admin`).
- A `Group` owns `CoValues`, with access right determined by group roles.
- Accounts can be added to groups directly or using shareable invite secrets.
</div>
</GridCard>
<GridCard>
#### `Account`
<div className="text-sm">
- Represents a single user and their signing/encryption keys.
- Has a private account root and a public profile
    - Can contain arbitrary app-specific data
</div>
</GridCard>
</Grid>

## The Jazz Toolkit

<Slogan small>A high-level toolkit for building apps around CoValues.</Slogan>

Supported environments:
<div className="text-sm">
- Browser (sync via WebSockets, IndexedDB persistence)
    - React
    - Vanilla JS / framework agnostic base
- React Native <ComingSoonBadge/>
- NodeJS (sync via WebSockets, SQLite persistence) <ComingSoonBadge/>
- Swift, Kotlin, Rust <ComingSoonBadge when="later"/>
</div>
<Grid>

<GridCard>
### Auto-sub
<Slogan small>Let your UI drive data-syncing.</Slogan>
<div className="text-sm">
- Load and auto-subscribe to deeply nested `CoValues` with a reactive hook (or callback).
- Access properties & metadata as plain JSON.
- Make granular changes with simple mutators.
- No queries needed, everything loads on-demand: <br/>
`profile?.tweets?.map(tweet => tweet?.text)`
</div>
</GridCard>

<GridCard>
### Cursors & carets
<Slogan small>Ready-made spatial presence.</Slogan>
<div className="text-sm">
- 2D canvas cursors <ComingSoonBadge/>
- Text carets <ComingSoonBadge/>
- Element-based focus-presence <ComingSoonBadge/>
- Scroll-based / out-of-bounds helpers <ComingSoonBadge/>
</div>
</GridCard>

<GridCard>
### Auth Providers

<Slogan small>Plug and play different kinds of auth.</Slogan>
<div className="text-sm">
- DemoAuth (for quick multi-user demos)
- WebAuthN (TouchID/FaceID)
- Auth0, Clerk & Okta <ComingSoonBadge/>
- NextAuth <ComingSoonBadge/>
</div>
</GridCard>

<GridCard>
### Two-way sync to your DB
<Slogan small>Add Jazz to an existing app.</Slogan>
<div className="text-sm">
- Prisma <ComingSoonBadge/>
- Drizzle <ComingSoonBadge/>
- PostgreSQL introspection <ComingSoonBadge/>
</div>
</GridCard>

<GridCard>
### File upload & download

<Slogan small>Just use `<input type="file"/>`.</Slogan>
<div className="text-sm">
- Easily convert from and to Browser `Blob`s
- Super simple progressive image loading
</div>
</GridCard>

<GridCard>
### Video presence & calls

<Slogan small>Stream and record audio & video.</Slogan>
<div className="text-sm">
- Automatic WebRTC connections between `Group` members <ComingSoonBadge/>
- Audio/video recording into `BinaryCoStreams` <ComingSoonBadge/>
</div>
</GridCard>
</Grid>

## Jazz Mesh

<Slogan small>Serverless sync & storage for Jazz apps</Slogan>

To give you sync and secure collaborative data instantly on a global scale, we're running Jazz Mesh. It works with any Jazz-based app, requires no setup and has straightforward, scale-to-zero pricing.

Jazz Mesh is currently free &mdash; and it's set up as the default sync & storage peer in Jazz, letting you start building multi-user apps with persistence right away, no backend needed.

<Link href="/mesh" target="_blank">Learn more about Jazz Mesh</Link>

## Get Started

- <Link href="/docs" target="_blank">Read the docs</Link>
- <Link href="https://discord.gg/utDMjHYg42" target="_blank">Join our Discord</Link>